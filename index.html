<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Free Trigonometry</title>
  <style>
    :root {
      --primary-color: #8B0000;
      --primary-hover: #a52a2a;
      --secondary-color: #00008B;
      --secondary-hover: #0000CD;
      --background-color: #f9f9f9;
      --content-background: #fff;
      --text-color: #333;
      --shadow: 0 4px 10px rgba(0,0,0,0.1);
      --border-radius: 10px;
    }

    /* Additional classes for advanced settings */
    .no-animation * {
      transition: none !important;
    }
    .compact .content {
      padding: 1rem !important;
      margin: 1rem auto !important;
    }
    /* New style for setting groups */
    .setting-group {
      border: 1px solid var(--primary-hover);
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: var(--border-radius);
      background: var(--content-background);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
      transition: background-color 0.3s, color 0.3s;
    }
    header {
      background-color: var(--primary-color);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      box-shadow: var(--shadow);
      transition: background-color 0.3s;
    }
    nav {
      background-color: var(--primary-color);
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      box-shadow: var(--shadow);
      transition: background-color 0.3s;
    }
    nav a {
      color: white;
      padding: 1rem;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    nav a:hover {
      background-color: var(--primary-hover);
    }
    .content {
      max-width: 1000px;
      margin: 2rem auto;
      background-color: var(--content-background);
      padding: 2rem;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      transition: background-color 0.3s;
    }
    .button-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }
    .game-button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1rem;
      cursor: pointer;
      background-color: var(--primary-color);
      color: white;
      transition: background-color 0.3s ease;
    }
    .game-button:hover {
      background-color: var(--primary-hover);
    }
    .iframe-container.fullscreen-mode {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: white;
      z-index: 9999;
    }
    .iframe-container iframe {
      width: 100%;
      height: 100%; /* Changed from calc(100% - 40px) to 100% */
      border: none;
    }
    .back-button {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 0.5rem 1rem;
      background: #ccc;
      border: none;
      border-radius: var(--border-radius);
      font-weight: bold;
      cursor: pointer;
      z-index: 10000;
    }
    .form-popup {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 2rem;
      box-shadow: var(--shadow);
      border-radius: var(--border-radius);
    }
    .form-popup input {
      display: block;
      margin-bottom: 1rem;
      width: 100%;
      padding: 0.5rem;
    }
    .form-popup button {
      margin-right: 1rem;
    }
  </style>
</head>
<body>
<div id="updatePopup" style="
  background-color: #ff4d4d;
  color: white;
  padding: 1rem;
  text-align: center;
  font-size: 1.2rem;
  font-weight: bold;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  border-radius: 10px;
  margin: 13rem;
  max-width: 600px;
  position: fixed;
  top: 20px;
  left: 75%;
  transform: translateX(-50%);
  z-index: 9999;
">
  Hey! Looks like you're using an outdated site,
  <br><br>
  <a href="https://q-bit.netlify.app/" target="_blank" style="
    display: inline-block;
    background: white;
    color: #ff4d4d;
    padding: 0.8rem 1.5rem;
    margin-top: 1rem;
    font-weight: bold;
    text-decoration: none;
    border-radius: 25px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: background 0.3s, color 0.3s;
  " onmouseover="this.style.background='#ff4d4d';this.style.color='white';" onmouseout="this.style.background='white';this.style.color='#ff4d4d';">
    Go to New Site 🚀
  </a>
</div>
  <header>
    <h1>Free Trigonometry²</h1>
    <p>Learn and play with trigonometry!</p>
  </header>
  <nav>
    <a href="#home" onclick="showPage('home', event)">Home</a>
    <a href="#about" onclick="showPage('about', event)">About</a>
    <a href="#games" onclick="showPage('games', event)">Games</a>
    <a href="#extra" onclick="showPage('extra', event)">Extra</a>
    <a href="#settings" onclick="showPage('settings', event)">Settings</a>
  </nav>
  <div class="content" id="home">
    <h2>Welcome to Free Trigonometry²!</h2>
    <p>This website offers fun and interactive ways to learn trigonometry. Use the navigation bar to learn more or to start playing educational games.</p>
  </div>
  <div class="content" id="about" style="display:none;">
    <h2>About</h2>
    <p>Free Trigonometry is a resource developed to make learning trigonometric concepts engaging and accessible.</p>
  </div>
  <div class="content" id="games" style="display:none;">
    <h2>Games</h2>
    <p>Click a game to load and play it below:</p>
    <div class="button-container">
      <button class="game-button" onclick="openCustomGame('https://landgreen.github.io/n-gon/index.html')">N-GON</button>
      <button class="game-button" onclick="openCustomGame('https://deadshot.io/')">Deadshot</button>
      <button class="game-button" onclick="openCustomGame('https://netquel.com/')">Netquel</button>
      <button class="game-button" onclick="openCustomGame('https://mk48.io/')">MK48</button>
      <button class="game-button" onclick="openCustomGame('https://tankgank.com/')">TankGank</button>
      <button class="game-button" onclick="openCustomGame('https://yp3d.com/ships3d/')">Ships 3D</button>
    </div>
    <h3>Your Custom Games</h3>
    <div id="customGames" class="button-container"></div>
    <button id="addGameBtn" class="game-button">+ Add Game</button>
  </div>
  <div class="content" id="extra" style="display:none;">
    <h2>Extra</h2>
    <p>This page contains additional resources, tips, and tutorials related to trigonometry!</p>
    <div class="button-container">
      <button class="game-button" onclick="loadExtraIframe()">Math Portal</button>
    </div>
  </div>
  <div class="content" id="settings" style="display:none;">
    <h2>Settings</h2>
    <div class="setting-group">
      <h3>Color Presets</h3>
      <div class="button-container">
        <button class="game-button" onclick="applyPreset('redWhite')">Red &amp; White (Default)</button>
        <button class="game-button" onclick="applyPreset('blueWhite')">Blue &amp; White</button>
        <button class="game-button" onclick="applyPreset('dark')">Dark Mode</button>
        <button class="game-button" onclick="applyPreset('greenWhite')">Green &amp; White</button>
        <button class="game-button" onclick="applyPreset('purpleWhite')">Purple &amp; White</button>
        <button class="game-button" onclick="applyPreset('orangeWhite')">Orange &amp; White</button>
        <button class="game-button" onclick="applyPreset('highContrast')">High Contrast</button>
        <button class="game-button" onclick="applyPreset('pastel')">Pastel</button>
        <button class="game-button" onclick="applyPreset('cosmic')">Cosmic</button>
        <button class="game-button" onclick="applyPreset('vintage')">Vintage</button>
      </div>
    </div>
    <div class="setting-group">
      <h3>Font Selection</h3>
      <select id="fontSelect">
        <option value="Segoe UI">Segoe UI</option>
        <option value="Arial, sans-serif">Arial</option>
        <option value="Times New Roman, serif">Times New Roman</option>
        <option value="Roboto, sans-serif">Roboto</option>
        <option value="Lato, sans-serif">Lato</option>
        <option value="Montserrat, sans-serif">Montserrat</option>
      </select>
    </div>
    <div class="setting-group">
      <h3>Animation Preferences</h3>
      <label><input type="checkbox" id="disableAnimations" /> Disable Animations</label>
    </div>
    <div class="setting-group">
      <h3>Layout Adjustments</h3>
      <label><input type="checkbox" id="compactLayout" /> Compact Layout</label>
    </div>
    <div class="setting-group">
      <h3>Background Customization</h3>
      <label for="bgSelect">Background Style:</label>
      <select id="bgSelect">
        <option value="default">Default</option>
        <option value="customImage">Custom Image</option>
      </select>
      <div id="bgUrlContainer" style="display:none; margin-top:0.5rem;">
        <input type="text" id="bgUrl" placeholder="Image URL (https://...)" />
      </div>
    </div>
    <div class="setting-group">
      <h3>Accessibility Options</h3>
      <label for="textSizeSelect">Text Size:</label>
      <select id="textSizeSelect">
        <option value="14px">Small</option>
        <option value="16px" selected>Medium</option>
        <option value="18px">Large</option>
        <option value="20px">Extra Large</option>
      </select>
    </div>
    <div class="setting-group">
      <h3>Custom Shortcuts</h3>
      <label>Home: <input type="text" id="shortcutHome" maxlength="1" /></label><br>
      <label>About: <input type="text" id="shortcutAbout" maxlength="1" /></label><br>
      <label>Games: <input type="text" id="shortcutGames" maxlength="1" /></label><br>
      <label>Extra: <input type="text" id="shortcutExtra" maxlength="1" /></label><br>
      <label>Settings: <input type="text" id="shortcutSettings" maxlength="1" /></label><br>
      <button id="saveShortcutsBtn" class="game-button">Save Shortcuts</button>
    </div>
    <div class="setting-group">
      <h3>Reset Settings</h3>
      <button id="resetSettingsBtn" class="game-button">Reset to Default</button>
    </div>
  </div>
  <div id="customIframe" class="iframe-container fullscreen-mode" style="display:none;">
    <button class="back-button" onclick="closeCustomGame()">← Back</button>
    <iframe></iframe>
  </div>
  <div id="gameForm" class="form-popup">
    <input id="gameName" placeholder="Game name">
    <input id="gameUrl" placeholder="Game URL (https://...)" >
    <button onclick="saveGame()">Save</button>
    <button onclick="closeForm()">Cancel</button>
  </div>
  <script>
    // 10 Color Presets with text color included.
    const presets = {
      redWhite: {
        '--primary-color': '#8B0000',
        '--primary-hover': '#a52a2a',
        '--secondary-color': '#00008B',
        '--secondary-hover': '#0000CD',
        '--background-color': '#ffffff',
        '--content-background': '#fff',
        '--text-color': '#333'
      },
      blueWhite: {
        '--primary-color': '#00008B',
        '--primary-hover': '#0000CD',
        '--secondary-color': '#8B0000',
        '--secondary-hover': '#a52a2a',
        '--background-color': '#ffffff',
        '--content-background': '#fff',
        '--text-color': '#333'
      },
      dark: {
        '--primary-color': '#333333',
        '--primary-hover': '#444444',
        '--secondary-color': '#666666',
        '--secondary-hover': '#777777',
        '--background-color': '#000000',
        '--content-background': '#222222',
        '--text-color': '#ffffff'
      },
      greenWhite: {
        '--primary-color': '#006400',
        '--primary-hover': '#228B22',
        '--secondary-color': '#8B0000',
        '--secondary-hover': '#a52a2a',
        '--background-color': '#ffffff',
        '--content-background': '#fff',
        '--text-color': '#333'
      },
      purpleWhite: {
        '--primary-color': '#4B0082',
        '--primary-hover': '#800080',
        '--secondary-color': '#FFD700',
        '--secondary-hover': '#FFC107',
        '--background-color': '#ffffff',
        '--content-background': '#fff',
        '--text-color': '#333'
      },
      orangeWhite: {
        '--primary-color': '#FF8C00',
        '--primary-hover': '#FFA500',
        '--secondary-color': '#00008B',
        '--secondary-hover': '#0000CD',
        '--background-color': '#ffffff',
        '--content-background': '#fff',
        '--text-color': '#333'
      },
      highContrast: {
        '--primary-color': '#000000',
        '--primary-hover': '#111111',
        '--secondary-color': '#ffffff',
        '--secondary-hover': '#dddddd',
        '--background-color': '#000000',
        '--content-background': '#222222',
        '--text-color': '#ffffff'
      },
      pastel: {
        '--primary-color': '#AEC6CF',
        '--primary-hover': '#BFD7EA',
        '--secondary-color': '#FFB347',
        '--secondary-hover': '#FFD1A9',
        '--background-color': '#fffaf0',
        '--content-background': '#ffffff',
        '--text-color': '#333'
      },
      cosmic: {
        '--primary-color': '#2E2B5F',
        '--primary-hover': '#474062',
        '--secondary-color': '#8A2BE2',
        '--secondary-hover': '#9370DB',
        '--background-color': '#000000',
        '--content-background': '#1C1C1C',
        '--text-color': '#ffffff'
      },
      vintage: {
        '--primary-color': '#704214',
        '--primary-hover': '#8B4513',
        '--secondary-color': '#C0A080',
        '--secondary-hover': '#D2B48C',
        '--background-color': '#F5F5DC',
        '--content-background': '#fffaf0',
        '--text-color': '#333'
      }
    };

    function applyPreset(presetName) {
      const preset = presets[presetName];
      for (const variable in preset) {
        document.documentElement.style.setProperty(variable, preset[variable]);
      }
      localStorage.setItem('colorPreset', presetName);
    }

    function loadPreset() {
      const savedPreset = localStorage.getItem('colorPreset');
      if (savedPreset && presets[savedPreset]) {
        applyPreset(savedPreset);
      }
    }

    // Updated showPage to hide popups.
    function showPage(pageId, event) {
      if (event) event.preventDefault();
      ['home', 'about', 'games', 'extra', 'settings'].forEach(id => {
        document.getElementById(id).style.display = 'none';
      });
      document.getElementById('customIframe').style.display = 'none';
      document.getElementById('gameForm').style.display = 'none';
      document.getElementById(pageId).style.display = 'block';
    }

    function openCustomGame(url) {
      document.querySelectorAll('.content').forEach(c => c.style.display = 'none');
      document.getElementById('customIframe').style.display = 'block';
      document.querySelector('#customIframe iframe').src = url;
    }

    function closeCustomGame() {
      document.querySelector('#customIframe iframe').src = '';
      document.getElementById('customIframe').style.display = 'none';
      document.getElementById('games').style.display = 'block';
    }

    function openForm() {
      document.getElementById('gameForm').style.display = 'block';
    }

    function closeForm() {
      document.getElementById('gameForm').style.display = 'none';
    }

    function saveGame() {
      const name = document.getElementById('gameName').value.trim();
      const url = document.getElementById('gameUrl').value.trim();
      if (!name || !url.startsWith('https://')) {
        alert('Please enter a valid name and a URL starting with https://');
        return;
      }
      const games = JSON.parse(localStorage.getItem('customGames') || '[]');
      games.push({ name, url });
      localStorage.setItem('customGames', JSON.stringify(games));
      closeForm();
      loadCustomGames();
    }

    function loadCustomGames() {
      const games = JSON.parse(localStorage.getItem('customGames') || '[]');
      const container = document.getElementById('customGames');
      container.innerHTML = '';
      games.forEach((game, index) => {
        const wrapper = document.createElement('div');
        const btn = document.createElement('button');
        btn.className = 'game-button';
        btn.textContent = game.name;
        btn.onclick = () => openCustomGame(game.url);
        const del = document.createElement('button');
        del.textContent = '🗑';
        del.style.marginLeft = '5px';
        del.onclick = () => {
          games.splice(index, 1);
          localStorage.setItem('customGames', JSON.stringify(games));
          loadCustomGames();
        };
        wrapper.appendChild(btn);
        wrapper.appendChild(del);
        container.appendChild(wrapper);
      });
    }

    // loadExtraIframe opens Math Portal in a new window.
    function loadExtraIframe() {
      const newWindow = window.open('about:blank');
      const iframe = document.createElement('iframe');
      iframe.style.width = '100%';
      iframe.style.height = '100vh';
      iframe.style.border = 'none';
      iframe.src = 'https://hw.billigerhost.com/settings';
      newWindow.document.body.style.margin = 0;
      newWindow.document.body.appendChild(iframe);
    }

    // Advanced Settings – Font Selection
    const fontSelect = document.getElementById('fontSelect');
    fontSelect.addEventListener('change', function() {
      document.body.style.fontFamily = this.value;
      localStorage.setItem('settingsFont', this.value);
    });
    function loadFontSetting() {
      const savedFont = localStorage.getItem('settingsFont');
      if (savedFont) {
        fontSelect.value = savedFont;
        document.body.style.fontFamily = savedFont;
      }
    }

    // Animation Preferences
    const disableAnimationsCheckbox = document.getElementById('disableAnimations');
    disableAnimationsCheckbox.addEventListener('change', function() {
      if (this.checked) {
        document.body.classList.add('no-animation');
        localStorage.setItem('settingsDisableAnimations', 'true');
      } else {
        document.body.classList.remove('no-animation');
        localStorage.setItem('settingsDisableAnimations', 'false');
      }
    });
    function loadAnimationSetting() {
      const animSetting = localStorage.getItem('settingsDisableAnimations');
      if (animSetting === 'true') {
        disableAnimationsCheckbox.checked = true;
        document.body.classList.add('no-animation');
      }
    }

    // Layout Adjustments
    const compactLayoutCheckbox = document.getElementById('compactLayout');
    compactLayoutCheckbox.addEventListener('change', function() {
      if (this.checked) {
        document.body.classList.add('compact');
        localStorage.setItem('settingsCompactLayout', 'true');
      } else {
        document.body.classList.remove('compact');
        localStorage.setItem('settingsCompactLayout', 'false');
      }
    });
    function loadLayoutSetting() {
      const layoutSetting = localStorage.getItem('settingsCompactLayout');
      if (layoutSetting === 'true') {
        compactLayoutCheckbox.checked = true;
        document.body.classList.add('compact');
      }
    }

    // Background Customization
    const bgSelect = document.getElementById('bgSelect');
    const bgUrlContainer = document.getElementById('bgUrlContainer');
    const bgUrlInput = document.getElementById('bgUrl');
    bgSelect.addEventListener('change', function() {
      localStorage.setItem('settingsBgStyle', this.value);
      if (this.value === 'customImage') {
        bgUrlContainer.style.display = 'block';
        if (bgUrlInput.value.trim() !== '') {
          document.body.style.backgroundImage = `url(${bgUrlInput.value.trim()})`;
          localStorage.setItem('settingsBgUrl', bgUrlInput.value.trim());
        }
      } else {
        bgUrlContainer.style.display = 'none';
        document.body.style.backgroundImage = '';
        localStorage.removeItem('settingsBgUrl');
      }
    });
    bgUrlInput.addEventListener('change', function() {
      const url = this.value.trim();
      if (url !== '' && url.startsWith('https://')) {
        document.body.style.backgroundImage = `url(${url})`;
        localStorage.setItem('settingsBgUrl', url);
      }
    });
    function loadBgSetting() {
      const bgStyle = localStorage.getItem('settingsBgStyle');
      if (bgStyle) {
        bgSelect.value = bgStyle;
        if (bgStyle === 'customImage') {
          bgUrlContainer.style.display = 'block';
          const savedUrl = localStorage.getItem('settingsBgUrl');
          if (savedUrl) {
            bgUrlInput.value = savedUrl;
            document.body.style.backgroundImage = `url(${savedUrl})`;
          }
        }
      }
    }

    // Accessibility Options – Text Size
    const textSizeSelect = document.getElementById('textSizeSelect');
    textSizeSelect.addEventListener('change', function() {
      document.documentElement.style.fontSize = this.value;
      localStorage.setItem('settingsTextSize', this.value);
    });
    function loadTextSizeSetting() {
      const savedSize = localStorage.getItem('settingsTextSize');
      if (savedSize) {
        textSizeSelect.value = savedSize;
        document.documentElement.style.fontSize = savedSize;
      }
    }

    // Custom Shortcuts
    const shortcutHome = document.getElementById('shortcutHome');
    const shortcutAbout = document.getElementById('shortcutAbout');
    const shortcutGames = document.getElementById('shortcutGames');
    const shortcutExtra = document.getElementById('shortcutExtra');
    const shortcutSettings = document.getElementById('shortcutSettings');
    document.getElementById('saveShortcutsBtn').addEventListener('click', function() {
      localStorage.setItem('shortcutHome', shortcutHome.value.toLowerCase());
      localStorage.setItem('shortcutAbout', shortcutAbout.value.toLowerCase());
      localStorage.setItem('shortcutGames', shortcutGames.value.toLowerCase());
      localStorage.setItem('shortcutExtra', shortcutExtra.value.toLowerCase());
      localStorage.setItem('shortcutSettings', shortcutSettings.value.toLowerCase());
      alert('Shortcuts saved!');
    });
    function loadShortcuts() {
      shortcutHome.value = localStorage.getItem('shortcutHome') || '';
      shortcutAbout.value = localStorage.getItem('shortcutAbout') || '';
      shortcutGames.value = localStorage.getItem('shortcutGames') || '';
      shortcutExtra.value = localStorage.getItem('shortcutExtra') || '';
      shortcutSettings.value = localStorage.getItem('shortcutSettings') || '';
    }
    // Listen for keydown events to trigger custom shortcuts.
    document.addEventListener('keydown', function(event) {
      const key = event.key.toLowerCase();
      if (key === localStorage.getItem('shortcutHome')) {
        showPage('home');
      } else if (key === localStorage.getItem('shortcutAbout')) {
        showPage('about');
      } else if (key === localStorage.getItem('shortcutGames')) {
        showPage('games');
      } else if (key === localStorage.getItem('shortcutExtra')) {
        showPage('extra');
      } else if (key === localStorage.getItem('shortcutSettings')) {
        showPage('settings');
      }
    });

    // Reset Settings Button
    document.getElementById('resetSettingsBtn').addEventListener('click', function() {
      if (confirm('Reset all settings to default?')) {
        localStorage.removeItem('colorPreset');
        localStorage.removeItem('settingsFont');
        localStorage.removeItem('settingsDisableAnimations');
        localStorage.removeItem('settingsCompactLayout');
        localStorage.removeItem('settingsBgStyle');
        localStorage.removeItem('settingsBgUrl');
        localStorage.removeItem('settingsTextSize');
        localStorage.removeItem('shortcutHome');
        localStorage.removeItem('shortcutAbout');
        localStorage.removeItem('shortcutGames');
        localStorage.removeItem('shortcutExtra');
        localStorage.removeItem('shortcutSettings');
        location.reload();
      }
    });

    document.getElementById('addGameBtn').addEventListener('click', openForm);

    window.onload = () => {
      showPage('home');
      loadCustomGames();
      loadPreset();
      loadFontSetting();
      loadAnimationSetting();
      loadLayoutSetting();
      loadBgSetting();
      loadTextSizeSetting();
      loadShortcuts();
    };
    // Prevent user from leaving the page without confirmation
    window.addEventListener('beforeunload', function (event) {
      const confirmationMessage = "Are you sure you want to leave? Any unsaved changes will be lost.";
      event.returnValue = confirmationMessage;
      return confirmationMessage;
    });

  </script>
</body>
</html>





